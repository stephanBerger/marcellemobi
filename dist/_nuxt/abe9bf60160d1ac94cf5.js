(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{380:function(e,t,r){var content=r(438);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(48).default)("6f10b341",content,!0,{sourceMap:!1})},437:function(e,t,r){"use strict";var o=r(380);r.n(o).a},438:function(e,t,r){(e.exports=r(47)(!1)).push([e.i,"#createArticlePage header{z-index:4}#createArticlePage .fa-bars{font-size:2em}#createArticlePage .contener-categories div{display:grid;grid-template-columns:repeat(2,1fr);grid-gap:15px}#createArticlePage .contener-categories div .btn-caption{border-radius:15px!important}#createArticlePage header{color:#fff;background-color:#25a9e8;position:fixed;width:100vw}#createArticlePage .form-contener{padding:70px 7vw 0}#createArticlePage .text_message_error{color:#fff;text-align:center;margin-top:20px;font-size:15px}#createArticlePage label{text-transform:uppercase;color:#fff;margin-bottom:10px}#createArticlePage button.active{background-color:#fff!important;color:#25a9e8!important;opacity:1}#createArticlePage .btn-caption{background-color:hsla(0,0%,100%,.2);opacity:.5}",""])},456:function(e,t,r){"use strict";r.r(t);r(25);var o,l,n=r(10),c=(r(99),{data:function(){return{form:{url:"",title:"",description:"",imgUrl:"",publisherName:"",publisherEmail:"",selectedCategory:""},errorMessage:"",categories:["écologie","mobilité","politique","bons plans"],previewLoaded:!1}},computed:{emptyFields:function(){for(var e in this.form)if(""==this.form[e])return!0;return!1},validEmail:function(){return/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)?/.test(this.form.url)}},methods:{selectCategory:function(e){this.form.selectedCategory=e},fetchPreview:(l=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.previewLoaded=!1,this.errorMessage="",this.validEmail){e.next=6;break}this.errorMessage="Désolé, cet URL est incorrect",e.next=12;break;case 6:return e.next=8,this.$axios.$get("/articles/preview",{params:{url:this.form.url}});case 8:t=e.sent,Object.assign(this.form,t),this.previewLoaded=!0,this.errorMessage="";case 12:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)}),sendArticle:(o=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$axios.$post("/articles",{title:this.form.title,description:this.form.description,img_url:this.form.imgUrl,url:this.form.url,publisher_name:this.form.publisherName,publisher_email:this.form.publisherEmail,category:this.form.selectedCategory});case 2:this.$router.push("/articles/validate");case 3:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})}}),m=(r(437),r(32)),component=Object(m.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"createArticlePage"}},[e._m(0),e._v(" "),r("div",{staticClass:"form-contener pb-5"},[r("b-input-group",{staticClass:"label mt-3",attrs:{id:"input-group-1",label:"Lien url","label-for":"input-3"}},[r("b-form-input",{staticClass:"mb-2 inputFormCreateArticle",attrs:{id:"input-3",type:"text",required:"",label:"Photo",placeholder:"URL de votre article"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}}),e._v(" "),r("b-input-group-append",{attrs:{append:"OK"}},[r("b-button",{staticClass:"d-flex",staticStyle:{height:"38px","border-radius":"0px 5px 5px 0px"},attrs:{variant:"primary"},on:{click:e.fetchPreview}},[e._v("OK")])],1)],1),e._v(" "),r("p",{staticClass:"text_message_error"},[e._v(e._s(e.errorMessage))]),e._v(" "),e.previewLoaded?[r("b-form-group",{staticClass:"label",attrs:{id:"input-group-1",label:"Photo","label-for":"input-1"}},[e.form.imgUrl?r("img",{staticClass:"img-fluid",attrs:{src:e.form.imgUrl}}):e._e()]),e._v(" "),r("b-form-group",{staticClass:"label",attrs:{id:"input-group-1",label:"Titre","label-for":"input-1"}},[r("b-form-input",{staticClass:"mb-4 inputFormCreateArticle",attrs:{id:"input-1",type:"text",required:"",placeholder:"Titre de votre article"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),r("b-form-group",{staticClass:"label",attrs:{id:"input-group-1",label:"Description","label-for":"input-2"}},[r("b-form-input",{staticClass:"mb-4 inputFormCreateArticle",attrs:{id:"input-2",type:"text",required:"",placeholder:"Courte description"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),r("b-form-group",{staticClass:"label",attrs:{id:"input-group-1",label:"Nom","label-for":"input-3"}},[r("b-form-input",{staticClass:"mb-4 inputFormCreateArticle",attrs:{id:"input-4",type:"text",required:"",placeholder:"Votre nom",autocomplete:"first_name"},model:{value:e.form.publisherName,callback:function(t){e.$set(e.form,"publisherName",t)},expression:"form.publisherName"}})],1),e._v(" "),r("b-form-group",{staticClass:"label",attrs:{id:"input-group-1",label:"Mail","label-for":"input-3"}},[r("b-form-input",{staticClass:"mb-4 inputFormCreateArticle",attrs:{id:"input-5",type:"email",autocomplete:"email",required:"",placeholder:"Votre mail"},model:{value:e.form.publisherEmail,callback:function(t){e.$set(e.form,"publisherEmail",t)},expression:"form.publisherEmail"}})],1),e._v(" "),r("b-form-group",{staticClass:"label contener-categories",attrs:{id:"input-group-1",label:"Catégorie","label-for":"input-4"}},e._l(e.categories,(function(t,o){return r("b-button",{key:o,staticClass:"p-4 text-uppercase btn-caption border-0",attrs:{pressed:e.form.selectedCategory===t},on:{click:function(r){return e.selectCategory(t)}}},[e._v(e._s(t))])})),1),e._v(" "),r("b-button",{attrs:{type:"submit",block:"",pill:"",variant:"primary",disabled:e.emptyFields},on:{click:function(t){return t.preventDefault(),e.sendArticle(t)}}},[e._v("Valider votre article")])]:e._e()],2)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("header",{staticClass:"px-3 py-2 d-flex justify-content-center"},[t("h3",{staticClass:"text-uppercase pt-3"},[this._v("Ajouter un article")])])}],!1,null,null,null);t.default=component.exports}}]);